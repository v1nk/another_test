{#
  /**
   * @file
   * Theme override for the basic structure of a single Drupal page.
   *
   * Variables:
   * - logged_in: A flag indicating if user is logged in.
   * - root_path: The root path of the current page (e.g., node, admin, user).
   * - node_type: The content type for the current node, if the page is a node.
   * - head_title: List of text elements that make up the head_title variable.
   *   May contain or more of the following:
   *   - title: The title of the page.
   *   - name: The name of the site.
   *   - slogan: The slogan of the site.
   * - page_top: Initial rendered markup. This should be printed before 'page'.
   * - page: The rendered page markup.
   * - page_bottom: Closing rendered markup. This variable should be printed after
   *   'page'.
   * - db_offline: A flag indicating if the database is offline.
   * - placeholder_token: The token for generating head, css, js and js-bottom
   *   placeholders.
   *
   * @see template_preprocess_html()
   */
  #}

{% set paidClass = '' %}
{% set oldPaidNavClass = '' %}


{% if node_type != 'zes_pages' and node_type != 'story_rfi_page' %}
  {{ attach_library('uagc/main') }}
{% elseif node_type == 'zes_pages' %}
  {% set paidClass = '--paid-landing-page' %}
{% endif %}


{% if node.field_old_paid_nav_footer.value == '1' or node_type == 'paid_landing_page' %}
  {% set oldPaidNavClass = '--old-paid-nav' %}
{% endif %}


{%
    set body_classes = [
      logged_in ? 'user-logged-in',
      not root_path ? 'path-frontpage' : 'path-' ~ root_path|clean_class,
      not root_path ? 'front' : 'not-front',
      node_type ? 'page--node-type-' ~ node_type|clean_class,
      paidClass,
      brandClass,
      oldPaidNavClass
    ]
  %}

<!DOCTYPE html>
<html{{html_attributes}} class="no-js">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <head-placeholder token="{{ placeholder_token|raw }}">
      <title>{{ head_title|safe_join(' | ') }}</title>

      <link rel="manifest" href="/manifest.json">
      <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
      <meta name="theme-color" content="#ffffff">
      <meta name="msvalidate.01" content="58FD1E7C02DD3CBFBA2EF6DE5134E61C"/>
      <meta name="facebook-domain-verification" content="mr4y0l1vgkddmtnlrtmgfkpl8d6vaw"/>
      <css-placeholder token="{{ placeholder_token|raw }}">
        <js-placeholder token="{{ placeholder_token|raw }}">

          <script type="text/javascript">
            window.phoneOverride = null;{% if node.field_phone_number_override is not empty %}window.phoneOverride = {
                href: '{{ node.field_phone_number_override.uri }}',
                text: '{{ node.field_phone_number_override.title }}'
              };{% endif %}
          </script>


          {% if node.field_phone_number_override is not empty %}{% endif %}

          {% if my_environment == "prod" %}
            <script type="text/javascript" src="//cdn.evgnet.com/beacon/zovioinc/production/scripts/evergage.min.js"></script>
          {% elseif my_environment == "test" %}
            <script type="text/javascript" src="//cdn.evgnet.com/beacon/zovioinc/development/scripts/evergage.min.js"></script>
          {% elseif my_environment == "dev" %}
            <script type="text/javascript" src="//cdn.evgnet.com/beacon/zovioinc/development/scripts/evergage.min.js"></script>
          {% endif %}
        </head>
        <body{{attributes.addClass(body_classes)}}>

          {% if jsList is not empty %}
            {% autoescape false %}
              <script type="text/javascript">
                window.jsFileList = {{ jsList|raw }};

                let docBody = document.querySelector( 'body' );
                let path = window.location.pathname;

                let keys = Object.keys( window.jsFileList );

                keys.forEach( function ( e, i, arr ) {
                  let re = new RegExp( e );

                  if ( path.match( re ) && path.match( re ).length > 0 ) {
                    let scripts = window.jsFileList[ e ];
                    scripts.forEach( function ( e1, i1, arr1 ) {
                      let scriptTag = document.createElement( 'script' );
                      scriptTag.setAttribute( 'src', '/sites/default/files/' + e1 );
                      scriptTag.setAttribute( 'type', 'text/javascript' );
                      docBody.prepend( scriptTag );

                    } );
                  }
                } );
              </script>
            {% endautoescape %}
          {% endif %}


          {{ page_top }}
          <a class="skiplinks" href="#main-content" class="skiplinks__link focusable" tabindex="0">{{ 'Skip to main content'|t }}</a>

          {% set noUtilityMenuClass = '' %}
          {% if noUtilityMenu == true %}
            {% set noUtilityMenuClass = '--no-utility-menu' %}
          {% endif %}
          <div class="site-container {{noUtilityMenuClass}}">
            {{ page }}
            <script type="text/javascript">
              if ( window.phoneOverride != null ) {
                let utilityPhones = document.querySelectorAll( '.site-header__secondary-menu-group-item .--phoneNumber' );
                if ( utilityPhones.length > 0 ) {
                  let lastLink = utilityPhones[utilityPhones.length - 1];
                  lastLink.setAttribute( 'href', window.phoneOverride.href );
                  lastLink.innerHTML = window.phoneOverride.text;
                }
              } else {
                if ( window.location.pathname.indexOf( '/partnerships/corporate' ) === 0 ) {
                  let utilityPhones = document.querySelectorAll( '.site-header__secondary-menu-group-item .--phoneNumber' );
                  if ( utilityPhones.length > 0 ) {
                    let lastLink = utilityPhones[utilityPhones.length - 1];
                    lastLink.setAttribute( 'href', 'tel://18558056911' );
                    lastLink.innerHTML = '+1 855 805 6911';
                  }
                }
              }
            </script>

          </div>
          <div class="site-overlays"></div>
          {% if node.getType != 'zes_pages' %}
            <div class="site-search-overlay js-search-overlay">
              <div class="site-search-overlay__container">
                <div class="site-search-overlay__close">
                  <button class="site-search-overlay__close-button js-search-close" type="button" aria-label="Close search overlay">Close<div class="site-search-overlay__close-icon">
                      {% include directory ~ '/templates/svg-icons/x.html.twig'%}
                    </div>
                  </button>


                </div>

                {% if node.getType == 'catalog' or "/search/catalog" in url("<current>")|render|render %}
                  <div>
                    <span class="site-search-overlay__header">Catalog Search</span>
                  </div>
                {% else %}
                  <div class="site-search-overlay__header">Search
                    <span class="site-search-overlay__header-red-text">UAGC</span>
                  </div>
                {% endif %}
                <div class="site-search-overlay__form-container">
                  {% if node.getType == 'catalog' or "/search/catalog" in url("<current>")|render|render %}
                    <div class="auto-search">{{drupal_entity('block', 'catalogautocompletesearchform', check_access=false) }}</div>
                  {% else %}
                    <div class="auto-search">{{drupal_entity('block', 'searchform', check_access=false) }}</div>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endif %}
          {{ page_bottom }}
          <js-bottom-placeholder token="{{ placeholder_token|raw }}">
            <button onclick="gslbBaseURL()" class="uagc-chat-button"></button>

            <script type='text/javascript'>
              function gslbBaseURL( e ) {
                embedded_svc.bootstrapEmbeddedService();
                var button = document.querySelector( '.uagc-chat-button' );
                if ( button ) { // button.style.display = 'none';
                }

              }
            </script>

            <style type='text/css'>

              .embeddedServiceHelpButton .helpButton .uiButton {
                background-color: #0c234b;
              }
              .embeddedServiceHelpButton .helpButton .uiButton:focus {
                outline: 1px solid #0c234b;
              }
              .embeddedServiceHelpButton .helpButton {
                position: fixed;
                bottom: 12px;
                right: 50px;
                height: 483px;
                width: 50px;
                -webkit-font-smoothing: subpixel-antialiased
              }

              .uagc-chat-button {
                background-color: #0c234b;
                border: none;
                color: #0c234b;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 0;
                margin: 4px 2px;
                border-radius: 50%;
                position: fixed;
                height: 65px;
                width: 65px;
                z-index: 9999999999999999;
                right: 30px;
                top: 46%;
                -webkit-box-shadow: 0 6px 13px 0 rgb(0 0 0 / 23%);
                box-shadow: 0 6px 13px 0 rgb(0 0 0 / 23%);
                display: none;
              }

              .uagc-chat-button::after {
                content: '\E900';
                position: absolute;
                background-color: transparent;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                display: block;
                color: white;
                font: normal normal normal 14px / 1 'chaticon';
                line-height: 65px;
                font-size: 45px;
              }


              @media(max-width: 1024px) {
                .uagc-chat-button {
                  right: 4px;
                  top: 54%;
                }
              }


              .uagc-chat-button:hover,
              .uagc-chat-button:active {
                background-position: unset;
              }
              .embeddedServiceSidebar.layout-docked .dockableContainer {
                right: 110px;
                bottom: 15px;
              }
              .embeddedServiceSidebar.modalContainer {}
              @media(max-width: 767px) {
                .embeddedServiceSidebar.layout-docked .dockableContainer {
                  right: 30px;
                }
              }
              @media(max-width: 576px) {
                .embeddedServiceSidebar.layout-docked .dockableContainer {
                  right: 10px;
                }
              }
            </style>
            <style>
              .embeddedServiceHelpButton .helpButton .uiButton {
                background-color: #005290;
                font-family: Arial, sans-serif;
              }

              .embeddedServiceHelpButton .helpButton .uiButton:focus {
                outline: 1px solid #005290;
              }
              .embeddedServiceSidebar .sidebarHeader .closeButton {
                padding: 3px;
              }

              .embeddedServiceSidebar .sidebarHeader .closeButton svg {
                height: 30px;
                width: 20px;
              }


              .embeddedServiceSidebar .sidebarHeader .minimizeButton {
                padding: 5px;
              }

              .embeddedServiceSidebar .sidebarHeader .minimizeButton svg {
                height: 20px;
                width: 20px;
              }


              .embeddedServicePreventScrolling .embeddedServiceSidebar.layout-docked .dockableContainer,
              .embeddedServicePreventScrolling.embeddedServiceSidebar.layout-float .dockableContainer {
                height: 97%;
                max-height: 100%;
                width: 100%;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 99999999999999999999;
              }

              .modalContainer.sidebarMaximized.layout-docked.embeddedServiceSidebar {
                z-index: 99999999999999999999;
              }


              .embeddedServicePreventScrolling .embeddedServiceSidebar.layout-docked .dockableContainer {
                bottom: -50px;
              }

              .embeddedServiceSidebarMinimizedDefaultUI.sidebarHeader {
                border-radius: 50%;
                padding: 0;
              }

              .embeddedServiceSidebarMinimizedDefaultUI .minimizedImage,
              .embeddedServiceSidebarMinimizedDefaultUI .embeddedServiceIcon {
                margin-right: 0;
              }

              .embeddedServiceSidebarMinimizedDefaultUI .minimizedImage {
                margin-left: 6px;
              }
              .embeddedServiceSidebarMinimizedDefaultUI .minimizedText {
                display: none;
              }


              .embeddedServiceLoadingBalls {
                display: none !important;
              }

              .embeddedServiceSidebarMinimizedDefaultUI {
                min-width: 65px !important;
                width: 65px !important;
                height: 65px !important;
                top: 46%;
              }

              .sidebarHeader.sidebarMinimized.embeddedServiceSidebarMinimizedDefaultUI {
                position: relative;
                -webkit-box-shadow: 0 6px 13px 0 rgb(0 0 0 / 23%);
                box-shadow: 0 6px 13px 0 rgb(0 0 0 / 23%);
              }

              .sidebarHeader.minimizedContainer.embeddedServiceSidebarMinimizedDefaultUI::after {
                content: '\E900';
                position: absolute;
                background-color: transparent;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                display: block;
                color: white;
                font: normal normal normal 14px / 1 'chaticon';
                line-height: 65px;
                font-size: 45px;
              }

              .sidebarHeader.minimizedContainer.embeddedServiceSidebarMinimizedDefaultUI .content {
                display: none !important;
              }


              .embeddedServiceSidebarMinimizedDefaultUI.sidebarHeader {
                bottom: auto;
                top: 46%;
              }

              @media(max-width: 1024px) {
                .embeddedServiceSidebarMinimizedDefaultUI.sidebarHeader {
                  bottom: auto;
                  right: 4px;
                  top: 54%;
                }

              }

              .embeddedServiceSidebar textarea {
                font-size: 16px !important;
              }

              .embeddedServiceLiveAgentStateChatInputFooter .chatActionButton.Send {
                padding: 0 0 0 10px;
              }
            </style>
            <div class='modalrfi'>
              <div class="block__content">
                <svg class="modal-close js-modal-close" alt="close button" width="32" height="32" viewbox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M24 8L8 24" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M8 8L24 24" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                {{drupal_entity('webform', 'modal_request_information', check_access=false)}}
              </div>
            </div>
          </body>
        </html>
